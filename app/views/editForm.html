<div class="row edit-form" ng-if="!crop">
  <div class="col-md-4 preview">
    <div thumbnail class="icon-lg"></div>
    <button class="btn btn-sm" title="crop" ng-if="file.filemime.indexOf('image') != -1" ng-click="startCrop($event)"><span class="glyphicon glyphicon-retweet" aria-hidden="true"></span></button>
  </div>
  <div class="col-md-8">
    
    <form editable-form name="editableForm" onaftersave="saveFile()" ng-if="!crop">
      <div class="editable-item">
        <span class="title">Name: </span>
        <span editable-text="file.name" e-name="name" e-required>{{file.name}}</span>
      </div> 

      <div class="editable-item">
        <span class="title">Alt Text: </span>
        <span editable-text="file.alt" e-name="alt" e-required>{{file.alt}}</span>
      </div>  

      <div class="editable-item">
        <span class="title">Attribution: </span>
        <span editable-text="file.title" e-name="title">{{file.title}}</span>
      </div>

      <div class="editable-item">
        <span class="title">Source: </span>
        <span editable-text="file.source" e-name="title"><a ng-if="file.source" href="{{file.source}}" target="_blank">{{file.source}}</a></span>
      </div>

      <div>
        <!-- button to show form -->
        <button type="button" class="btn btn-default" ng-click="editableForm.$show()" ng-show="!editableForm.$visible">
          Edit
        </button>
        <!-- buttons to submit / cancel form -->
        <span ng-show="editableForm.$visible">
          <button type="submit" class="btn btn-primary" ng-disabled="editableForm.$waiting">
            Save
          </button>
          <button type="button" class="btn btn-default" ng-disabled="editableForm.$waiting" ng-click="editableForm.$cancel()">
            Cancel
          </button>
        </span>
      </div>

    </form>

  </div>
</div>

<div class="image-crop" ng-if="crop">
  <div ng-jcrop="file.cropUrl" selection="coords"></div>
  <button class="btn btn-danger bottom-left" ng-click="stopCrop($event)">Cancel</button>

  <div class="bottom-right">
    <button class="btn btn-default" ng-click="saveCrop(true)"><span class="glyphicon glyphicon-warning-sign" aria-hidden="true"></span> Overwrite</button>
    <button class="btn btn-primary" ng-click="saveCrop(false)"><span class="glyphicon glyphicon-floppy-disk" aria-hidden="true"></span> Save as Copy</button>
  </div>
</div>